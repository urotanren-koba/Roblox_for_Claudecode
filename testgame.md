以下に、Roblox向け「跳び箱（モンスターボックス）ゲーム」の**要件定義書（たたき台）**を作成いたします。実装に入れる粒度まで落としてあります。

⸻

要件定義書：Monster Box Jump（仮）

1. 目的・ゴール

1-1. 目的
	•	跳び箱をモチーフにした短時間で繰り返し遊べるスキルゲームを提供する
	•	世界ランキングで競争を促し、継続率（リテンション）を高める

1-2. ゴール指標（例）
	•	1プレイ：30〜60秒
	•	1セッション：平均5プレイ以上
	•	D1リテンション：20%超（目標）
	•	ランキング参加率：60%超（目標）

⸻

2. ターゲット
	•	Roblox一般ユーザー（小〜中高生中心）
	•	短時間で爽快感が欲しい層、ランキング好き層
	•	難しすぎる操作は避け、初心者でも最低限飛べる設計にする

⸻

3. ゲーム概要

3-1. ジャンル
	•	スキル（タイミング）× 距離記録 × ランキング

3-2. 1プレイの流れ（コアループ）
	1.	ロビーで装備/見た目/ルール確認
	2.	レーンに入る（自動マッチ不要、常時プレイ可能）
	3.	助走 → 踏切 → 空中姿勢/押し → 着地
	4.	記録（距離/段数/スコア）算出
	5.	報酬付与 → もう一回（リトライ） or 強化/着替え

⸻

4. 主要仕様（機能要件）

4-1. 操作仕様（必須）

※「3要素」を活かしつつ、初心者が即死しない設計にします。

A. 助走（Run）
	•	方式：長押し or 連打で加速（どちらか採用）
	•	パラメータ：runPower（0〜100）
	•	失敗影響：低いと速度不足で距離が伸びない（即失敗にはしない）

B. 踏切（Board Timing）
	•	方式：踏切板に到達した瞬間にタイミング入力（判定ゲージ）
	•	判定：Perfect / Good / Bad
	•	影響：跳躍角度・初速倍率に反映

C. 押し（Arm Push）
	•	方式：跳び箱接触フレーム付近で入力（短い受付時間）
	•	判定：Perfect / Good / Bad / Miss
	•	影響：距離ボーナス倍率に反映、Missでも最低限は飛ぶ

⸻

4-2. スコア・記録（必須）

記録種別
	•	距離（m）：着地点までの水平距離
	•	段数：跳び箱の段を何段越えたか
	•	スコア：距離＋判定ボーナス＋段数ボーナスの合算

計算（例）
	•	score = distance * (1 + timingBonus + pushBonus) + (stageCleared * stageBonus)
	•	不正対策のため、サーバー側で最終確定する

⸻

4-3. 跳び箱（ステージ）仕様

通常箱（必須）
	•	段数：初期 3〜10段（段階解放）
	•	当たり判定：跳び箱上面・側面・縁で挙動が変わる（簡易でOK）

モンスターボックス（拡張：優先度高）
	•	日替わり/週替わりで箱にギミックを付与
	•	例：バウンド箱（着地時に跳ねる）、吸引箱（姿勢乱れ）、反発箱（押し成功で加速）など
	•	ランキングを固定化させないため、シーズン制に活用

⸻

4-4. ランキング（必須）

ランキング種別
	•	世界（All-time）
	•	週間（Weekly）
	•	本日（Daily）
	•	装備制限（例：Cosmetic Only / ノーマル装備）

表示要件
	•	Top100表示、本人の順位表示
	•	自分のベスト記録の履歴（直近10回）を表示

⸻

4-5. 報酬・経済（必須）

通貨
	•	Coins：プレイで獲得（主通貨）

獲得ロジック（例）
	•	Coins = base + distanceReward + perfectBonus + dailyBonus
	•	連続プレイボーナス（コンボ）を導入して離脱を抑える

⸻

4-6. アイテム・課金（必須だがPay2Win禁止）

無課金で買えるもの
	•	スキン（跳び箱/キャラ）
	•	エフェクト（踏切/着地/軌跡）
	•	エモート

課金（GamePass/DevProduct案）
	•	2倍コイン（ただし上限あり）
	•	追加スロット（見た目装備枠）
	•	リトライ即時ボタン（利便性）
	•	※性能に直結する数値上昇は原則禁止（ランキング崩壊防止）

⸻

4-7. UI/UX（必須）
	•	ロビー：プレイ開始/装備/ランキング/チュートリアル
	•	プレイUI：
	•	助走ゲージ
	•	踏切判定ゲージ（Perfect帯を見せる）
	•	押し判定の合図（アイコン/SE）
	•	記録表示（距離・段数・スコア）
	•	リザルト：
	•	今回の判定内訳
	•	自己ベスト更新演出
	•	「もう一回」ボタンを最優先配置

⸻

4-8. チュートリアル（必須）
	•	30秒で終わる段階式
	1.	助走だけ
	2.	踏切だけ
	3.	押しだけ
	4.	本番1回
	•	初回は判定受付を甘くする（内部補正）

⸻

5. データ設計（最低限）

プレイヤーデータ
	•	userId
	•	bestDistance
	•	bestScore
	•	bestStageCleared
	•	coins
	•	ownedCosmetics[]
	•	settings（感度、SE、カメラ等）
	•	historyLast10[]（距離/スコア/判定）

ランキングデータ
	•	Daily/Weekly/All-time それぞれに
	•	userId
	•	value（距離orスコア）
	•	timestamp
	•	サーバー確定値のみ登録

⸻

6. 非機能要件
	•	対応端末：PC / モバイル / タブレット
	•	目標FPS：安定（過度な物理演算は禁止）
	•	ラグ対策：操作判定はクライアント入力＋サーバー検証のハイブリッド
	•	不正対策：
	•	異常速度/異常距離の検知（閾値）
	•	サーバー側で最終スコア確定
	•	障害時：ランキング書き込み失敗時のリトライ（キュー）

⸻

7. 範囲（スコープ）

MVP（最初に作る範囲）
	•	通常箱のみ
	•	3要素操作（助走/踏切/押し）
	•	距離計測＋スコア
	•	Daily/Weeklyランキング
	•	コイン獲得＋スキン少数

追加（伸びたら入れる）
	•	モンスターボックスギミック（週替わり）
	•	シーズン制
	•	ゴースト（上位プレイヤーの軌跡再生）
	•	マップ演出（飛距離で景色が変わる）

⸻

8. 受入基準（例）
	•	初心者がチュートリアル後、10回中8回以上は「記録が残る」
	•	Perfect判定が出ると体感で伸びが分かる
	•	同一条件で同じ入力なら結果が大きくブレない
	•	ランキングが日次で正常更新される
	•	不正（速度改変等）でランキング登録されない

⸻
